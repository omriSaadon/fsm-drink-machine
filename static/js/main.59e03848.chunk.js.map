{"version":3,"sources":["components/DrinkFlowChart/DrinkFlowChart.scss","components/OrderStatus/OrderStatus.scss","components/Payment/Payment.scss","components/Notifications/NotificationStatus.scss","components/CardWrapper/CardWrapper.scss","custom-hooks/FSM/useFsm.js","store/FsmStore.js","store/fsm_reducer.js","constants/index.js","components/Budget/Budget.js","custom-hooks/useCountdown.js","components/DrinkChooser/DrinkChooser.js","components/DrinkFlowChart/DrinkFlowChart.js","components/OrderStatus/OrderStatus.js","components/Payment/Payment.js","constants/machine-specification.js","components/Notifications/NotificationStatus.js","components/CardWrapper/CardWrapper.js","components/DrinkMachine/DrinkMachine.js","components/Layout/MainLayout.js","index.js","components/DrinkMachine/DrinkMachine.scss","components/DrinkChooser/DrinkChooser.scss","components/Layout/MainLayout.scss","components/Budget/Budget.scss"],"names":["module","exports","useFsm","machineSpec","useReducer","currentState","action","generalAction","generalActions","Error","context","payload","state","stateOptions","states","newState","next","FsmReducer","initialState","Store","React","createContext","Provider","displayName","useStore","useContext","FsmStoreProvider","children","dispatch","value","makePayment","currentBudget","paid","getContext","getCurrentBudget","getPaid","getMachineStatus","GENERAL_ACTIONS","STATES","ACTION_STATES","COINS","key","label","DRINKS","price","icon","alt","src","process","FLOW_INITIAL_ELEMENTS","id","data","position","x","y","targetPosition","sourcePosition","source","target","labelStyle","fill","fontWeight","animated","arrowHeadType","labelBgPadding","labelBgBorderRadius","labelBgStyle","fillOpacity","Budget","initial","wait","useState","timer","setTimer","useEffect","timeout","setTimeout","clearTimeout","useCountdown","DEPOSIT_TIME","nextDeposit","className","classes","card","title","DrinkChooser","drinkMachineStatus","wrapper","drinks","map","drink","onClick","message","type","axios","post","then","res","catch","shape","size","DrinkFlowChart","elements","setElements","newElements","element","style","background","flow","zoomOnScroll","nodesDraggable","elementsSelectable","zoomOnDoubleClick","paneMoveable","nodesConnectable","OrderStatus","paidText","cancelPayment","Payment","coins","coin","addBudget","addMessage","messageType","NotificationStatus","getMessage","getMessageType","onClose","notification","closable","CardWrapper","item","DrinkMachine","components","FsmStore","img","cards","Component","name","MainLayout","content","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59e03848.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"flow\":\"DrinkFlowChart__flow___A2SIh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancelPayment\":\"OrderStatus__cancelPayment___3fzQ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coins\":\"Payment__coins___1r3tr\",\"error\":\"Payment__error___3UMjb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification\":\"NotificationStatus__notification___3EdiX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"CardWrapper__item___iGa93\"};","import { useReducer } from 'react';\n/*\n  UseFsm is serving as a state management.\n  States are defined via the machineSpec parameter.\n  Each action can lead to the next state as described at the machineSpec.\n*/\nconst FsmReducer = (machineSpec) => (currentState, action) => {\n  if (action.generalAction) {\n    const generalAction = machineSpec.generalActions[action.generalAction];\n    if (!generalAction) throw new Error(`No such general action ${action.generalAction}`);\n    const context = generalAction(currentState.context, action.payload);\n    return { state: currentState.state, context };\n  }\n\n  const stateOptions = machineSpec.states[currentState.state];\n\n  if (!stateOptions) throw new Error(`No such state ${currentState.state}`);\n\n  const newState = stateOptions[action.state];\n\n  if (!newState) throw new Error(`No such action ${action} for ${currentState}`);\n\n  const context = newState.action ? newState.action(currentState.context, action.payload) : currentState.context;\n  return { state: newState.next, context };\n};\n\nexport const useFsm = (machineSpec) => (\n  useReducer(FsmReducer(machineSpec), machineSpec.initialState)\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useFsm } from 'custom-hooks/FSM/useFsm';\n\nconst Store = React.createContext();\nexport const { Provider } = Store;\nStore.displayName = 'Drink Machine FSM store';\n\nexport const useStore = () => React.useContext(Store);\n\nconst propTypes = {\n  children: PropTypes.node,\n  machineSpec: PropTypes.object,\n};\n\nconst FsmStoreProvider = ({ children, machineSpec }) => {\n  const [state, dispatch] = useFsm(machineSpec);\n\n  return <Store.Provider value={[state, dispatch]}>{children}</Store.Provider>;\n};\n\nFsmStoreProvider.propTypes = propTypes;\nexport default FsmStoreProvider;\n","export const makePayment = (context, payload) => ({\n  ...context,\n  currentBudget: context.currentBudget - payload,\n  paid: context.paid + payload,\n});\n\nexport const addBudget = (context, payload) => ({\n  ...context,\n  currentBudget: context.currentBudget + payload,\n});\n\nexport const makePurchase = (context, payload) => ({\n  ...context,\n  paid: context.paid - payload,\n});\n\nexport const cancelPayment = (context) => ({\n  ...context,\n  currentBudget: context.currentBudget + context.paid,\n  paid: 0,\n});\n\nexport const addMessage = (context, { message, type }) => ({\n  ...context,\n  message,\n  messageType: type,\n});\n\nconst getContext = (state) => state.context;\nexport const getCurrentBudget = (state) => getContext(state).currentBudget;\nexport const getPaid = (state) => getContext(state).paid;\nexport const getMachineStatus = (state) => state.state;\nexport const getMessage = (state) => getContext(state).message;\nexport const getMessageType = (state) => getContext(state).messageType;\n","import React from 'react';\n\nexport const INITIAL_BUDGET = 10;\n\nexport const GENERAL_ACTIONS = {\n  ADD_BUDGET: 'addBudget',\n  ADD_MESSAGE: 'addMessage',\n};\n\nexport const STATES = {\n  IDLE: 'idle',\n  ORDERING: 'ordering',\n  DELIVERY: 'delivery',\n};\n\nexport const ACTION_STATES = {\n  PAYMENT: 'payment',\n  CANCEL: 'cancel',\n  PURCHASE: 'purchase',\n  DONE: 'done',\n};\n\nexport const COINS = [\n  { key: 'one', label: '1 ₪', value: 1 },\n  { key: 'two', label: '2 ₪', value: 2 },\n  { key: 'five', label: '5 ₪', value: 5 },\n  { key: 'ten', label: '10 ₪', value: 10 },\n];\n\nexport const DRINKS = [\n  {\n    key: 'Coke', label: 'Coke', price: 8, icon: <img alt=\"\" src={`${process.env.PUBLIC_URL}/assets/images/coca-cola.jpeg`} />,\n  },\n  {\n    key: 'Sparkling_Water', label: 'Sparkling Water', price: 6, icon: <img alt=\"\" src={`${process.env.PUBLIC_URL}/assets/images/sparkling-water.jpeg`} />,\n  },\n  {\n    key: 'Water', label: 'Water', price: 5, icon: <img alt=\"\" src={`${process.env.PUBLIC_URL}/assets/images/water.jpeg`} />,\n  },\n  {\n    key: 'Ice_Tea', label: 'Ice Tea', price: 7, icon: <img alt=\"\" src={`${process.env.PUBLIC_URL}/assets/images/ice-tea.jpeg`} />,\n  },\n];\n\nexport const FLOW_INITIAL_ELEMENTS = [\n  {\n    id: STATES.IDLE,\n    data: { label: 'Idle' },\n    position: { x: 10, y: 100 },\n    targetPosition: 'right',\n    sourcePosition: 'bottom',\n  },\n  {\n    id: 'payment_needed', data: { label: 'Payment Is Needed' }, position: { x: 300, y: 10 }, targetPosition: 'left', sourcePosition: 'left',\n  },\n  {\n    id: STATES.ORDERING, data: { label: 'Ordering' }, position: { x: 420, y: 240 }, sourcePosition: 'left',\n  },\n  {\n    id: STATES.DELIVERY, data: { label: 'delivery' }, position: { x: 550, y: 100 }, sourcePosition: 'left', targetPosition: 'bottom',\n  },\n  {\n    id: ACTION_STATES.CANCEL, data: { label: 'Cancel Order' }, position: { x: 100, y: 200 }, targetPosition: 'right', sourcePosition: 'top',\n  },\n  {\n    id: 'idle-payment_needed',\n    source: STATES.IDLE,\n    target: 'payment_needed',\n    labelStyle: { fill: 'red', fontWeight: 700 },\n    label: 'Clicked item without payment',\n  },\n  {\n    id: 'idle-ordering', source: STATES.IDLE, target: STATES.ORDERING, animated: true, label: 'Payment Succeed', arrowHeadType: 'arrowclosed',\n  },\n  {\n    id: 'ordering-delivery', source: STATES.ORDERING, target: STATES.DELIVERY, animated: true, label: 'Item Selected', arrowHeadType: 'arrowclosed',\n  },\n  {\n    id: 'ordering-cancel',\n    source: STATES.ORDERING,\n    target: ACTION_STATES.CANCEL,\n    label: 'Canceled',\n    labelStyle: { fill: 'red', fontWeight: 700 },\n    arrowHeadType: 'arrowclosed',\n  },\n  {\n    id: 'cancel-idle', source: ACTION_STATES.CANCEL, target: STATES.IDLE, arrowHeadType: 'arrowclosed',\n  },\n  {\n    id: 'delivery-idle',\n    source: STATES.DELIVERY,\n    target: STATES.IDLE,\n    arrowHeadType: 'arrowclosed',\n    animated: true,\n    labelBgPadding: [8, 4],\n    labelBgBorderRadius: 4,\n    labelBgStyle: {\n      fill: '#FFCC00', fillOpacity: 1,\n    },\n    label: 'Finished',\n  },\n];\n","import React, { useEffect } from 'react';\nimport { Card } from 'antd';\nimport { useStore } from 'store/FsmStore';\nimport { getCurrentBudget } from 'store/fsm_reducer';\nimport { GENERAL_ACTIONS } from 'constants/index';\nimport { useCountdown } from 'custom-hooks/useCountdown';\nimport classes from './Budget.scss';\n\nconst DEPOSIT_TIME = 10;\nconst ADD_BUDGET = 10;\n\nconst Budget = () => {\n  const [nextDeposit] = useCountdown(DEPOSIT_TIME - 1);\n  const [state, dispatch] = useStore();\n\n  const currentBudget = getCurrentBudget(state);\n\n  useEffect(() => {\n    // Each ADD_BUDGET time, we get new money into our budget/wallet.\n    if (nextDeposit === 0) dispatch({ generalAction: GENERAL_ACTIONS.ADD_BUDGET, payload: ADD_BUDGET });\n  }, [nextDeposit]);\n\n  return (\n    <Card className={classes.card} title=\"Wallet\">\n      <div>{`Current Budget: ${currentBudget} ₪`}</div>\n      <div>{`Next Deposit: ${nextDeposit}`}</div>\n    </Card>\n  );\n};\n\nexport default Budget;\n","import { useState, useEffect } from 'react';\n\nexport const useCountdown = (initial, wait = 1000) => {\n  const [timer, setTimer] = useState(initial);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (timer === 0) setTimer(initial);\n      else setTimer(timer - 1);\n    }, wait);\n    return () => clearTimeout(timeout);\n  }, [timer]);\n\n  return [timer];\n};\n","import React from 'react';\nimport { Button, Card } from 'antd';\nimport axios from 'axios';\nimport { useStore } from 'store/FsmStore';\nimport { getPaid, getMachineStatus } from 'store/fsm_reducer';\nimport {\n  GENERAL_ACTIONS, STATES, ACTION_STATES, DRINKS,\n} from 'constants/index';\nimport classes from './DrinkChooser.scss';\n\nconst DrinkChooser = () => {\n  const [state, dispatch] = useStore();\n\n  const paid = getPaid(state);\n  const drinkMachineStatus = getMachineStatus(state);\n\n  const onBuy = (price) => () => {\n    if (drinkMachineStatus === STATES.DELIVERY) {\n      // In this case, purchasing while already delivering other product is forbidden and an error message will appear.\n      dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Please wait until delivery is finished', type: 'error' } });\n    } else if (paid - price >= 0) {\n      // In case we purchased a product but still has paid money to the machine, the state should be Ordering as we can order more products.\n      dispatch({ state: ACTION_STATES.PURCHASE, payload: price });\n      // Calling to a mock server which has delay of few seconds.\n      axios.post('https://fsmmock.free.beeceptor.com', { price })\n        .then((res) => {\n          dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: res.data, type: 'success' } });\n          if (paid - price === 0) dispatch({ state: ACTION_STATES.DONE }); // If paid is zero, we should move to Idle state.\n          else dispatch({ state: ACTION_STATES.PAYMENT, payload: 0 }); // If paid is bigger than zero, payment state should take place.\n        }).catch(() => {\n          dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Machine is out of service, your money is gone', type: 'error' } });\n        });\n    } else {\n      // If trying to purchase a product which we didn't pay enough money for, an error message will appear.\n      dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Insufficient funds', type: 'error' } });\n    }\n  };\n\n  return (\n    <Card title=\"Choose Your Drink\">\n      <div className={classes.wrapper}>\n        <div className={classes.drinks}>\n          {DRINKS.map((drink) => (\n            <Button key={drink.key} onClick={onBuy(drink.price)} shape=\"round\" size=\"large\" icon={drink.icon}>{`${drink.label} - ${drink.price} ₪`}</Button>))}\n        </div>\n      </div>\n    </Card>\n  );\n};\n\nexport default DrinkChooser;\n","import React, { useEffect, useState } from 'react';\nimport ReactFlow from 'react-flow-renderer';\nimport { useStore } from 'store/FsmStore';\nimport { getMachineStatus } from 'store/fsm_reducer';\nimport { FLOW_INITIAL_ELEMENTS } from 'constants/index';\nimport classes from './DrinkFlowChart.scss';\n\nconst DrinkFlowChart = () => {\n  const [elements, setElements] = useState(FLOW_INITIAL_ELEMENTS);\n  const [state] = useStore();\n\n  const drinkMachineStatus = getMachineStatus(state);\n\n  useEffect(() => {\n    const newElements = elements.map((element) => {\n      if (element.id === drinkMachineStatus) {\n        return { ...element, style: { background: '#D6D5E6' } };\n      }\n      return { ...element, style: { ...element.style, background: null } };\n    });\n    setElements(newElements);\n  }, [state]);\n\n  return (\n    <div className={classes.flow}>\n      <ReactFlow\n        elements={elements}\n        zoomOnScroll={false}\n        nodesDraggable={false}\n        elementsSelectable={false}\n        zoomOnDoubleClick={false}\n        paneMoveable={false}\n        nodesConnectable={false}\n      />\n    </div>\n  );\n};\n\nexport default DrinkFlowChart;\n","import React from 'react';\nimport { Card, Button } from 'antd';\nimport { useStore } from 'store/FsmStore';\nimport { getPaid, getMachineStatus } from 'store/fsm_reducer';\nimport { ACTION_STATES, STATES, GENERAL_ACTIONS } from 'constants/index';\nimport classes from './OrderStatus.scss';\n\nconst OrderStatus = () => {\n  const [state, dispatch] = useStore();\n\n  const paid = getPaid(state);\n  const drinkMachineStatus = getMachineStatus(state);\n\n  const paidText = `You have paid ${paid} ₪`;\n\n  const onCancelPament = () => {\n    // Cancel payment can be made only on Ordering state, otherwise an error wil appear.\n    if (drinkMachineStatus === STATES.ORDERING) {\n      dispatch({ state: ACTION_STATES.CANCEL });\n    } else {\n      dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Cancel can be made only on ordering status', type: 'error' } });\n    }\n  };\n\n  return (\n    <Card title=\"Order Status\">\n      <div>{paidText}</div>\n      <Button className={classes.cancelPayment} onClick={onCancelPament} shape=\"round\" size=\"small\">Cancel Payment</Button>\n    </Card>\n  );\n};\n\nexport default OrderStatus;\n","import React from 'react';\nimport { Card, Alert, Button } from 'antd';\nimport { useStore } from 'store/FsmStore';\nimport { getCurrentBudget, getMachineStatus } from 'store/fsm_reducer';\nimport {\n  GENERAL_ACTIONS, STATES, ACTION_STATES, COINS,\n} from 'constants/index';\nimport classes from './Payment.scss';\n\nconst Payment = () => {\n  const [state, dispatch] = useStore();\n\n  const currentBudget = getCurrentBudget(state);\n  const drinkMachineStatus = getMachineStatus(state);\n\n  const onPayment = (value) => () => {\n    if (drinkMachineStatus === STATES.DELIVERY) {\n      // While the machine is delivering, the machine would not accept any payment.\n      dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Please wait until the machine finish delivery', type: 'error' } });\n    } else if (currentBudget - value >= 0) {\n      dispatch({ state: ACTION_STATES.PAYMENT, payload: value });\n    } else {\n      // It's not possible to borrow money from the machine\n      dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: 'Margin is Disallowed', type: 'error' } });\n    }\n  };\n\n  return (\n    <Card title=\"Payment\">\n      <Alert\n        message=\"We accepts coins only\"\n        type=\"warning\"\n      />\n      <div className={classes.coins}>\n        {COINS.map((coin) => <Button onClick={onPayment(coin.value)} key={coin.key} shape=\"round\" size=\"medium\">{coin.label}</Button>)}\n      </div>\n    </Card>\n  );\n};\n\nexport default Payment;\n","import {\n  makePayment, addBudget, cancelPayment, makePurchase, addMessage,\n} from 'store/fsm_reducer';\nimport { INITIAL_BUDGET, STATES, ACTION_STATES } from '.';\n\nexport default {\n  initialState: {\n    state: STATES.IDLE,\n    context: {\n      currentBudget: INITIAL_BUDGET,\n      paid: 0,\n      message: '',\n    },\n  },\n  generalActions: {\n    addBudget,\n    addMessage,\n  },\n  states: {\n    [STATES.IDLE]: {\n      [ACTION_STATES.PAYMENT]: {\n        next: STATES.ORDERING,\n        action: makePayment,\n      },\n    },\n    [STATES.ORDERING]: {\n      [ACTION_STATES.CANCEL]: {\n        next: STATES.IDLE,\n        action: cancelPayment,\n      },\n      [ACTION_STATES.PURCHASE]: {\n        next: STATES.DELIVERY,\n        action: makePurchase,\n      },\n      [ACTION_STATES.PAYMENT]: {\n        next: STATES.ORDERING,\n        action: makePayment,\n      },\n    },\n    [STATES.DELIVERY]: {\n      [ACTION_STATES.DONE]: {\n        next: STATES.IDLE,\n      },\n      [ACTION_STATES.PAYMENT]: {\n        next: STATES.ORDERING,\n        action: makePayment,\n      },\n    },\n  },\n};\n","import React, { useEffect } from 'react';\nimport { Alert } from 'antd';\nimport { useStore } from 'store/FsmStore';\nimport { getMessageType, getMessage } from 'store/fsm_reducer';\nimport { GENERAL_ACTIONS } from 'constants/index';\nimport classes from './NotificationStatus.scss';\n\nconst NotificationStatus = () => {\n  const [state, dispatch] = useStore();\n\n  const message = getMessage(state);\n  const messageType = getMessageType(state);\n\n  const onClose = () => {\n    dispatch({ generalAction: GENERAL_ACTIONS.ADD_MESSAGE, payload: { message: '', type: null } });\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      onClose();\n    }, 5000);\n    return () => clearTimeout(timer);\n  }, [message]);\n\n  return (\n    <div className={classes.notification}>\n      {message\n            && (\n            <Alert\n              message={message}\n              type={messageType}\n              closable\n              onClose={onClose}\n            />\n            )}\n    </div>\n\n  );\n};\n\nexport default NotificationStatus;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classes from './CardWrapper.scss';\n\nconst propTypes = {\n  children: PropTypes.node,\n};\n\nconst CardWrapper = ({ children }) => <div className={classes.item}>{children}</div>;\n\nCardWrapper.propTypes = propTypes;\nexport default CardWrapper;\n","import React from 'react';\nimport Budget from 'components/Budget/Budget';\nimport DrinkChooser from 'components/DrinkChooser/DrinkChooser';\nimport DrinkFlowChart from 'components/DrinkFlowChart/DrinkFlowChart';\nimport OrderStatus from 'components/OrderStatus/OrderStatus';\nimport Payment from 'components/Payment/Payment';\nimport FsmStoreProvider from 'store/FsmStore';\nimport machineSpec from 'constants/machine-specification';\nimport NotificationStatus from 'components/Notifications/NotificationStatus';\nimport CardWrapper from 'components/CardWrapper/CardWrapper';\nimport classes from './DrinkMachine.scss';\n\nconst DrinkMachine = () => {\n  const components = [Payment, Budget, DrinkChooser, OrderStatus];\n  return (\n    <FsmStoreProvider machineSpec={machineSpec}>\n      <NotificationStatus />\n      <div className={classes.wrapper}>\n        <img className={classes.img} alt=\"drink\" src={`${process.env.PUBLIC_URL}/assets/images/drink.jpg`} />\n        <div className={classes.cards}>\n          {components.map((Component) => <CardWrapper key={Component.name}><Component /></CardWrapper>)}\n        </div>\n      </div>\n      <DrinkFlowChart />\n    </FsmStoreProvider>\n  );\n};\n\nexport default DrinkMachine;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classes from './MainLayout.scss';\n\nconst propTypes = {\n  children: PropTypes.node,\n};\n\nconst MainLayout = ({ children }) => (\n  <div className={classes.wrapper}>\n    <div className={classes.content}>\n      {children}\n    </div>\n  </div>\n);\n\nMainLayout.propTypes = propTypes;\nexport default MainLayout;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport DrinkMachine from 'components/DrinkMachine/DrinkMachine';\nimport MainLayout from 'components/Layout/MainLayout';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <MainLayout>\n    <DrinkMachine />\n  </MainLayout>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DrinkMachine__wrapper___sVaza\",\"img\":\"DrinkMachine__img___ZndjD\",\"cards\":\"DrinkMachine__cards___32klk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drinks\":\"DrinkChooser__drinks___3ANmY\",\"error\":\"DrinkChooser__error___3XeTs\",\"wrapper\":\"DrinkChooser__wrapper___1tzMF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"MainLayout__wrapper____tZYI\",\"content\":\"MainLayout__content___1jSXM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Budget__card___2jiq1\"};"],"sourceRoot":""}