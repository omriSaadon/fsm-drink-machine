(this["webpackJsonpdrink-machine"]=this["webpackJsonpdrink-machine"]||[]).push([[0],{103:function(e,t,a){e.exports={card:"Budget__card___2jiq1"}},104:function(e,t,a){e.exports={flow:"DrinkFlowChart__flow___A2SIh"}},105:function(e,t,a){e.exports={cancelPayment:"OrderStatus__cancelPayment___3fzQ3"}},106:function(e,t,a){e.exports={coins:"Payment__coins___1r3tr",error:"Payment__error___3UMjb"}},107:function(e,t,a){e.exports={notification:"NotificationStatus__notification___3EdiX"}},108:function(e,t,a){e.exports={item:"CardWrapper__item___iGa93"}},204:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c),o=a(13),s=a(206),l=a(209),d=a(95),u=a.n(d),j=function(e){return Object(n.useReducer)(function(e){return function(t,a){if(a.generalAction){var n=e.generalActions[a.generalAction];if(!n)throw new Error("No such general action ".concat(a.generalAction));var r=n(t.context,a.payload);return{state:t.state,context:r}}var c=e.states[t.state];if(!c)throw new Error("No such state ".concat(t.state));var i=c[a.state];if(!i)throw new Error("No such action ".concat(a," for ").concat(t));var o=i.action?i.action(t.context,a.payload):t.context;return{state:i.next,context:o}}}(e),e.initialState)},p=a(6),b=r.a.createContext();b.Provider;b.displayName="Drink Machine FSM store";var m,g,f,O=function(){return r.a.useContext(b)},y=function(e){var t=e.children,a=e.machineSpec,n=j(a),r=Object(o.a)(n,2),c=r[0],i=r[1];return Object(p.jsx)(b.Provider,{value:[c,i],children:t})},_=a(14),h=function(e,t){return Object(_.a)(Object(_.a)({},e),{},{currentBudget:e.currentBudget-t,paid:e.paid+t})},x=function(e){return e.context},v=function(e){return x(e).currentBudget},k=function(e){return x(e).paid},w=function(e){return e.state},C="addBudget",P="addMessage",N="idle",S="ordering",B="delivery",A="payment",D="cancel",M="purchase",T="done",E=[{key:"one",label:"1 \u20aa",value:1},{key:"two",label:"2 \u20aa",value:2},{key:"five",label:"5 \u20aa",value:5},{key:"ten",label:"10 \u20aa",value:10}],I=[{key:"Coke",label:"Coke",price:8,icon:Object(p.jsx)("img",{alt:"",src:"".concat("/fsm-drink-machine","/assets/images/coca-cola.jpeg")})},{key:"Sparkling_Water",label:"Sparkling Water",price:6,icon:Object(p.jsx)("img",{alt:"",src:"".concat("/fsm-drink-machine","/assets/images/sparkling-water.jpeg")})},{key:"Water",label:"Water",price:5,icon:Object(p.jsx)("img",{alt:"",src:"".concat("/fsm-drink-machine","/assets/images/water.jpeg")})},{key:"Ice_Tea",label:"Ice Tea",price:7,icon:Object(p.jsx)("img",{alt:"",src:"".concat("/fsm-drink-machine","/assets/images/ice-tea.jpeg")})}],W=[{id:N,data:{label:"Idle"},position:{x:10,y:100},targetPosition:"right",sourcePosition:"bottom"},{id:"payment_needed",data:{label:"Payment Is Needed"},position:{x:300,y:10},targetPosition:"left",sourcePosition:"left"},{id:S,data:{label:"Ordering"},position:{x:420,y:240},sourcePosition:"left"},{id:B,data:{label:"delivery"},position:{x:550,y:100},sourcePosition:"left",targetPosition:"bottom"},{id:D,data:{label:"Cancel Order"},position:{x:100,y:200},targetPosition:"right",sourcePosition:"top"},{id:"idle-payment_needed",source:N,target:"payment_needed",labelStyle:{fill:"red",fontWeight:700},label:"Clicked item without payment"},{id:"idle-ordering",source:N,target:S,animated:!0,label:"Payment Succeed",arrowHeadType:"arrowclosed"},{id:"ordering-delivery",source:S,target:B,animated:!0,label:"Item Selected",arrowHeadType:"arrowclosed"},{id:"ordering-cancel",source:S,target:D,label:"Canceled",labelStyle:{fill:"red",fontWeight:700},arrowHeadType:"arrowclosed"},{id:"cancel-idle",source:D,target:N,arrowHeadType:"arrowclosed"},{id:"delivery-idle",source:B,target:N,arrowHeadType:"arrowclosed",animated:!0,labelBgPadding:[8,4],labelBgBorderRadius:4,labelBgStyle:{fill:"#FFCC00",fillOpacity:1},label:"Finished"}],z=a(68),F=a.n(z),H=function(){var e=O(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=k(a),c=w(a);return Object(p.jsx)(s.a,{title:"Choose Your Drink",children:Object(p.jsx)("div",{className:F.a.wrapper,children:Object(p.jsx)("div",{className:F.a.drinks,children:I.map((function(e){return Object(p.jsx)(l.a,{onClick:(t=e.price,function(){c===B?n({generalAction:P,payload:{message:"Please wait until delivery is finished",type:"error"}}):r-t>=0?(n({state:M,payload:t}),u.a.post("https://fsmmock.free.beeceptor.com",{price:t}).then((function(e){n({generalAction:P,payload:{message:e.data,type:"success"}}),n(r-t===0?{state:T}:{state:A,payload:0})})).catch((function(){n({generalAction:P,payload:{message:"Machine is out of service, your money is gone",type:"error"}})}))):n({generalAction:P,payload:{message:"Insufficient funds",type:"error"}})}),shape:"round",size:"large",icon:e.icon,children:"".concat(e.label," - ").concat(e.price," \u20aa")},e.key);var t}))})})})},Y=a(103),X=a.n(Y),J=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=Object(n.useState)(e),r=Object(o.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){i(0===c?e:c-1)}),t);return function(){return clearTimeout(a)}}),[c]),[c]}(9),t=Object(o.a)(e,1)[0],a=O(),r=Object(o.a)(a,2),c=r[0],i=r[1],l=v(c);return Object(n.useEffect)((function(){0===t&&i({generalAction:C,payload:10})}),[t]),Object(p.jsxs)(s.a,{className:X.a.card,title:"Wallet",children:[Object(p.jsx)("div",{children:"Current Budget: ".concat(l," \u20aa")}),Object(p.jsx)("div",{children:"Next Deposit: ".concat(t)})]})},L=a(109),R=a(104),Z=a.n(R),q=function(){var e=Object(n.useState)(W),t=Object(o.a)(e,2),a=t[0],r=t[1],c=O(),i=Object(o.a)(c,1)[0],s=w(i);return Object(n.useEffect)((function(){var e=a.map((function(e){return e.id===s?Object(_.a)(Object(_.a)({},e),{},{style:{background:"#D6D5E6"}}):Object(_.a)(Object(_.a)({},e),{},{style:Object(_.a)(Object(_.a)({},e.style),{},{background:null})})}));r(e)}),[i]),Object(p.jsx)("div",{className:Z.a.flow,children:Object(p.jsx)(L.a,{elements:a,zoomOnScroll:!1,nodesDraggable:!1,elementsSelectable:!1,zoomOnDoubleClick:!1,paneMoveable:!1,nodesConnectable:!1})})},G=a(105),Q=a.n(G),U=function(){var e=O(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=k(a),c=w(a),i="You have paid ".concat(r," \u20aa");return Object(p.jsxs)(s.a,{title:"Order Status",children:[Object(p.jsx)("div",{children:i}),Object(p.jsx)(l.a,{className:Q.a.cancelPayment,onClick:function(){n(c===S?{state:D}:{generalAction:P,payload:{message:"Cancel can be made only on ordering status",type:"error"}})},shape:"round",size:"small",children:"Cancel Payment"})]})},V=a(207),K=a(106),$=a.n(K),ee=function(){var e=O(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=v(a),c=w(a);return Object(p.jsxs)(s.a,{title:"Payment",children:[Object(p.jsx)(V.a,{message:"We accepts coins only",type:"warning"}),Object(p.jsx)("div",{className:$.a.coins,children:E.map((function(e){return Object(p.jsx)(l.a,{onClick:(t=e.value,function(){n(c===B?{generalAction:P,payload:{message:"Please wait until the machine finish delivery",type:"error"}}:r-t>=0?{state:A,payload:t}:{generalAction:P,payload:{message:"Margin is Disallowed",type:"error"}})}),shape:"round",size:"medium",children:e.label},e.key);var t}))})]})},te=a(18),ae={initialState:{state:N,context:{currentBudget:10,paid:0,message:""}},generalActions:{addBudget:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{currentBudget:e.currentBudget+t})},addMessage:function(e,t){var a=t.message,n=t.type;return Object(_.a)(Object(_.a)({},e),{},{message:a,messageType:n})}},states:(f={},Object(te.a)(f,N,Object(te.a)({},A,{next:S,action:h})),Object(te.a)(f,S,(m={},Object(te.a)(m,D,{next:N,action:function(e){return Object(_.a)(Object(_.a)({},e),{},{currentBudget:e.currentBudget+e.paid,paid:0})}}),Object(te.a)(m,M,{next:B,action:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{paid:e.paid-t})}}),Object(te.a)(m,A,{next:S,action:h}),m)),Object(te.a)(f,B,(g={},Object(te.a)(g,T,{next:N}),Object(te.a)(g,A,{next:S,action:h}),g)),f)},ne=a(107),re=a.n(ne),ce=function(){var e=O(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=function(e){return x(e).message}(a),i=function(e){return x(e).messageType}(a),s=function(){r({generalAction:P,payload:{message:"",type:null}})};return Object(n.useEffect)((function(){var e=setTimeout((function(){s()}),5e3);return function(){return clearTimeout(e)}}),[c]),Object(p.jsx)("div",{className:re.a.notification,children:c&&Object(p.jsx)(V.a,{message:c,type:i,closable:!0,onClose:s})})},ie=a(108),oe=a.n(ie),se=function(e){var t=e.children;return Object(p.jsx)("div",{className:oe.a.item,children:t})},le=a(62),de=a.n(le),ue=function(){var e=[ee,J,H,U];return Object(p.jsxs)(y,{machineSpec:ae,children:[Object(p.jsx)(ce,{}),Object(p.jsxs)("div",{className:de.a.wrapper,children:[Object(p.jsx)("img",{className:de.a.img,alt:"drink",src:"".concat("/fsm-drink-machine","/assets/images/drink.jpg")}),Object(p.jsx)("div",{className:de.a.cards,children:e.map((function(e){return Object(p.jsx)(se,{children:Object(p.jsx)(e,{})},e.name)}))})]}),Object(p.jsx)(q,{})]})},je=a(72),pe=a.n(je),be=function(e){var t=e.children;return Object(p.jsx)("div",{className:pe.a.wrapper,children:Object(p.jsx)("div",{className:pe.a.content,children:t})})};a(203);i.a.render(Object(p.jsx)(be,{children:Object(p.jsx)(ue,{})}),document.getElementById("root"))},62:function(e,t,a){e.exports={wrapper:"DrinkMachine__wrapper___sVaza",img:"DrinkMachine__img___ZndjD",cards:"DrinkMachine__cards___32klk"}},68:function(e,t,a){e.exports={drinks:"DrinkChooser__drinks___3ANmY",error:"DrinkChooser__error___3XeTs",wrapper:"DrinkChooser__wrapper___1tzMF"}},72:function(e,t,a){e.exports={wrapper:"MainLayout__wrapper____tZYI",content:"MainLayout__content___1jSXM"}}},[[204,1,2]]]);
//# sourceMappingURL=main.ff40dbe2.chunk.js.map